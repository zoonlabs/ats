{% extends 'base.html' %}
{% block content %}
<h1 class="mb-4">Dashboard</h1>
<div class="row mb-4">
	<!-- Total Jobs Card -->
	<div class="col-md-3 col-sm-6 mb-3">
		<div class="card border-0 shadow-sm h-100">
			<div class="card-body">
				<div class="d-flex justify-content-between align-items-start">
					<div>
						<h6 class="text-muted text-uppercase small mb-1">Total Jobs</h6>
						<h2 class="mb-0 fw-bold">{{ total_jobs }}</h2>
					</div>
					<div class="bg-primary bg-opacity-10 p-3 rounded">
						<i class="bi bi-briefcase text-primary" style="font-size: 1.5rem;"></i>
					</div>
				</div>
				<p class="text-muted small mb-0 mt-2">
					<i class="bi bi-arrow-up text-success"></i>
					<span class="text-success fw-semibold">Active positions</span>
				</p>
			</div>
		</div>
	</div>

	<!-- Total Candidates Card -->
	<div class="col-md-3 col-sm-6 mb-3">
		<div class="card border-0 shadow-sm h-100">
			<div class="card-body">
				<div class="d-flex justify-content-between align-items-start">
					<div>
						<h6 class="text-muted text-uppercase small mb-1">Total Candidates</h6>
						<h2 class="mb-0 fw-bold">{{ total_candidates }}</h2>
					</div>
					<div class="bg-success bg-opacity-10 p-3 rounded">
						<i class="bi bi-people text-success" style="font-size: 1.5rem;"></i>
					</div>
				</div>
				<p class="text-muted small mb-0 mt-2">
					<i class="bi bi-clock-history"></i>
					<span class="fw-semibold">In pipeline</span>
				</p>
			</div>
		</div>
	</div>

	<!-- Shortlisted Card -->
	<div class="col-md-3 col-sm-6 mb-3">
		<div class="card border-0 shadow-sm h-100">
			<div class="card-body">
				<div class="d-flex justify-content-between align-items-start">
					<div>
						<h6 class="text-muted text-uppercase small mb-1">Shortlisted</h6>
						<h2 class="mb-0 fw-bold">{{ shortlisted }}</h2>
					</div>
					<div class="bg-warning bg-opacity-10 p-3 rounded">
						<i class="bi bi-star text-warning" style="font-size: 1.5rem;"></i>
					</div>
				</div>
				<p class="text-muted small mb-0 mt-2">
					<i class="bi bi-eye"></i>
					<span class="fw-semibold">Need review</span>
				</p>
			</div>
		</div>
	</div>

	<!-- Rejected Card -->
	<div class="col-md-3 col-sm-6 mb-3">
		<div class="card border-0 shadow-sm h-100">
			<div class="card-body">
				<div class="d-flex justify-content-between align-items-start">
					<div>
						<h6 class="text-muted text-uppercase small mb-1">Rejected</h6>
						<h2 class="mb-0 fw-bold">{{ rejected }}</h2>
					</div>
					<div class="bg-danger bg-opacity-10 p-3 rounded">
						<i class="bi bi-x-circle text-danger" style="font-size: 1.5rem;"></i>
					</div>
				</div>
				<p class="text-muted small mb-0 mt-2">
					<i class="bi bi-check2"></i>
					<span class="fw-semibold">Processed</span>
				</p>
			</div>
		</div>
	</div>
</div>
<div class="d-flex justify-content-between align-items-center mb-3">
	<h2>Recent Jobs</h2>
	<a href="{% url 'job_create' %}" class="btn btn-primary">
		<i class="bi bi-plus-circle me-2"></i>Create New Job
	</a>
</div>

<div class="card border-0 shadow-sm">
	<div class="table-responsive">
		<table class="table table-hover mb-0">
			<thead class="table-light">
				<tr>
					<th class="border-0">Job Title</th>
					<th class="border-0">Created</th>
					<th class="border-0">Candidates</th>
					<th class="border-0">Status</th>
					<th class="border-0 text-end">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for job in recent_jobs %}
				<tr>
					<td>
						<a href="{% url 'job_detail' job.pk %}" class="text-decoration-none fw-semibold text-dark">
							{{ job.title }}
						</a>
					</td>
					<td>
						<small class="text-muted">
							<i class="bi bi-calendar3"></i>
							{{ job.created_at|date:"M d, Y" }}
						</small>
					</td>
					<td>
						<span class="badge bg-light text-dark">
							<i class="bi bi-person-fill"></i>
							{{ job.num_applications|default:0 }} candidates
						</span>
					</td>
					<td>
						<span class="badge bg-success">
							<i class="bi bi-check-circle"></i> Active
						</span>
					</td>
					<td class="text-end">
						<div class="btn-group btn-group-sm" role="group">
							<a href="{% url 'job_detail' job.pk %}" class="btn btn-outline-primary" title="View Details">
								<i class="bi bi-eye"></i>
							</a>
							<a href="{% url 'candidate_upload' %}?job={{ job.pk }}" class="btn btn-outline-success" title="Add Candidate">
								<i class="bi bi-person-plus"></i>
							</a>
						</div>
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="5" class="text-center py-5">
						<i class="bi bi-inbox" style="font-size: 3rem; color: #ccc;"></i>
						<p class="text-muted mt-2">No jobs found. Create your first job posting!</p>
						<a href="{% url 'job_create' %}" class="btn btn-primary">
							<i class="bi bi-plus-circle me-2"></i>Create Job
						</a>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}